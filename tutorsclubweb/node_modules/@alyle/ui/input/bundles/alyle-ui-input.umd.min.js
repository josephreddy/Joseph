!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/forms"),require("rxjs"),require("@alyle/ui"),require("@angular/common")):"function"==typeof define&&define.amd?define("ly.input",["exports","@angular/core","@angular/forms","rxjs","@alyle/ui","@angular/common"],t):t((e.ly=e.ly||{},e.ly.input={}),e.ng.core,e.ng.forms,e.rxjs,e.ly.core,e.ng.common)}(this,function(e,t,n,i,o,r){"use strict";var l=function(){};l.decorators=[{type:t.Directive,args:[{selector:"ly-before-input, ly-after-input"}]}];var a=function(){function e(e,t,n,o,r){this.elementRef=e,this._ngControl=t,this._parentForm=n,this._parentFormGroup=o,this.cd=r,this.focusState=new i.Subject,this._disabled=!1,this._required=!1}return e.prototype.focus=function(e){this.focusState.next(e)},e.prototype._blur=function(e){this.focusState.next(e)},e.prototype._noop=function(){},Object.defineProperty(e.prototype,"disabled",{get:function(){return this._ngControl?this._ngControl.disabled:this._disabled},set:function(e){this._disabled=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._ngControl?this._ngControl.invalid:this._required},set:function(e){this._required=!!e},enumerable:!0,configurable:!0}),e.prototype.markForCheck=function(){this.cd.markForCheck()},e.prototype._parent=function(){return this._parentFormGroup||this._parentForm},e.prototype._updateErrorState=function(){this._parentFormGroup||this._parentForm,this._ngControl&&this._ngControl.control},e.prototype.ngOnChanges=function(e){},e.prototype.ngOnDestroy=function(){this.focusState.complete()},e}();a.decorators=[{type:t.Directive,args:[{selector:"ly-input input, ly-textarea textarea"}]}],a.ctorParameters=function(){return[{type:t.ElementRef},{type:n.NgControl,decorators:[{type:t.Optional},{type:t.Self}]},{type:n.NgForm,decorators:[{type:t.Optional}]},{type:n.FormGroupDirective,decorators:[{type:t.Optional}]},{type:t.ChangeDetectorRef}]},a.propDecorators={type:[{type:t.Input}],focus:[{type:t.HostListener,args:["focus",["true"]]}],_blur:[{type:t.HostListener,args:["blur",["false"]]}],_noop:[{type:t.HostListener,args:["input"]}],disabled:[{type:t.Input}],required:[{type:t.Input}]};var s=function(e){this.theme=e,this.classes={}};s.decorators=[{type:t.Injectable,args:[o.ProvidedInTheme]}],s.ctorParameters=function(){return[{type:o.LyTheme}]},s.ngInjectableDef=t.defineInjectable({factory:function(){return new s(t.inject(o.LyTheme))},token:s,providedIn:o.AlyleUIModule});var u=this&&this.__decorate||function(e,t,n,o){var r,i=arguments.length,l=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;0<=a;a--)(r=e[a])&&(l=(i<3?r(l):3<i?r(t,n,l):r(t,n))||l);return 3<i&&l&&Object.defineProperty(t,n,l),l},c=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},p=function(){};p.decorators=[{type:t.Directive,args:[{selector:"ly-default, ly-before, ly-after, ly-input ly-error, ly-input ly-hint"}]}];var d=function(){};d.decorators=[{type:t.Directive,args:[{selector:"ly-placeholder"}]}];var f=function(){};f.decorators=[{type:t.Directive,args:[{selector:"ly-default"}]}];var y=function(){};y.decorators=[{type:t.Directive,args:[{selector:"ly-label"}]}];var h=function(){function e(e,t,n,o,r,i){this.theme=e,this._changeDetectorRef=t,this.inputService=n,this._inputColor="primary",this.changed=new Array,this.touched=new Array,this.type="text",this._classes={}}return Object.defineProperty(e.prototype,"withColor",{get:function(){return this._withColor},set:function(e){this._withColor=e,this.updateColor(e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFloatingLabel",{get:function(){return this.currentValueState||this.labelAbove||this.isDefault||this.focusState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeholderState",{get:function(){return!this.currentValueState&&this.focusState||!this.currentValueState&&!this.focusState&&this.isFloatingLabel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultOff",{get:function(){return this.currentValue===this["default"]&&!this.focusState||!this.currentValueState&&!this.focusState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._field.disabled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._field.required},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentValueState",{get:function(){return 0!==(""+this.currentValue).length&&null!=this.currentValue},enumerable:!0,configurable:!0}),e.prototype._valueBoolean=function(e){return!(null===e||e===undefined||!1===e||""===e)},e.prototype._isErrorState=function(){if(this._field)return this._field._ngControl.invalid&&this._field._ngControl.touched||this._errorState},e.prototype.updateError=function(){this._errorState=this._field._ngControl.invalid},e.prototype.value=function(){return this.currentValue},e.prototype.updateColor=function(e){var t=this,n=function(){return t.theme.colorOf(e)};this._classes.caretColor=this.theme.setStyle("input:caret"+e,function(){return"caret-color:"+n()}),this._classes.withColor=this.theme.setStyle("input:"+e,function(){return"color:"+n()+";background-color:"+t.theme.palette.input.underline+";"})},e.prototype.toBoolean=function(e){return o.toBoolean(e)},Object.defineProperty(e.prototype,"isPlaceholder",{get:function(){return o.toBoolean(this.placeholder)||!!this.lyPlaceholder},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDefault",{get:function(){return o.toBoolean(this["default"])||!!this.lyDefault},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLabel",{get:function(){return o.toBoolean(this.label)||!!this.lyLabel},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;this.withColor||this.updateColor(this.theme.palette.input.withColor),this.focusStateSuscription=this._field.focusState.subscribe(function(e){t.focusState=e}),this._field._parent()&&this._field._parent().ngSubmit.subscribe(function(e){t.updateError()})},e.prototype.ngAfterViewInit=function(){},e.prototype.ngAfterContentInit=function(){var t=this;this._field?(this.currentValue=this._field._ngControl.value,this._field._ngControl&&this._field._ngControl.valueChanges&&this._field._ngControl.valueChanges.subscribe(function(e){t.currentValue=e,t._errorState=!1,t._changeDetectorRef.markForCheck()}),this._field.focusState.subscribe(function(e){t.isDefault&&(t.currentValueState||(t.currentValue=t["default"],t._field._ngControl.valueAccessor.writeValue(t["default"]),t._field._ngControl.viewToModelUpdate(t["default"]))),t._field.markForCheck(),t._changeDetectorRef.markForCheck()})):console.warn("LyInput: Require input native")},e.prototype._shouldForward=function(e){var t=this._field?this._field._ngControl:null;return t&&t[e]},e.prototype.ngOnChanges=function(e){e["default"]&&this.isDefault&&!this.currentValueState&&(this.currentValue=this["default"],this._field._ngControl.viewToModelUpdate(this["default"]))},e.prototype.ngOnDestroy=function(){this.focusStateSuscription.unsubscribe()},e}();h.decorators=[{type:t.Component,args:[{selector:"ly-text-field, ly-input, ly-textarea",styles:[":host{display:inline-block;position:relative;-webkit-box-align:center;-ms-flex-align:center;align-items:center}:host /deep/ ly-after,:host /deep/ ly-before{display:inline-block;vertical-align:inherit}:host /deep/ input,:host /deep/ textarea{border:none;outline:0;font-family:inherit;color:inherit;background:0 0;font-size:inherit;width:100%;font-weight:400;padding:0;display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex}:host.ly-default-off .ly-input-default,:host.ly-hidden-input /deep/ .ly-input-container input,:host.ly-hidden-input /deep/ .ly-input-container textarea{opacity:0}:host.ly-focus-active .ly-input-underline:after{width:100%}:host.ly-focus-active .ly-input-top-label,:host.ly-focus-active /deep/ ly-top-label{font-size:75%;top:0;-webkit-transform:translate(0,0);transform:translate(0,0)}:host.ly-focus-active .ly-input-default{opacity:0}:host.ly-value-on .ly-input-placeholder{opacity:0}.ly-input-underline{position:absolute;bottom:.875em;height:1px;right:0;left:0}.ly-input-underline:after{content:'';position:absolute;width:0%;height:2px;background:currentColor;left:0;right:0;margin:0 auto;bottom:0;-webkit-transition:all 450ms cubic-bezier(.23,1,.32,1) 0s;transition:all 450ms cubic-bezier(.23,1,.32,1) 0s}.ly-input-underline.ly-disabled{background:0/4px 1px repeat-x;background-image:-webkit-gradient(linear,left top,right top,from(#b4b4b4),color-stop(33%,#b4b4b4),color-stop(0,transparent));background-image:linear-gradient(to right,#b4b4b4 0,#b4b4b4 33%,transparent 0);border-top:0}.ly-input-underline.ly-disabled:after{width:0%}:host.ly-label-above .ly-input-float-label{font-size:75%;top:0}.ly-input-default,.ly-input-float-label,.ly-input-placeholder{pointer-events:none;position:absolute;bottom:1.125em;top:1.125em;margin:auto;font-size:100%;-webkit-transition:all 375ms cubic-bezier(.23,1,.32,1);transition:all 375ms cubic-bezier(.23,1,.32,1);color:inherit;width:100%}.ly-input-content{width:100%;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;color:currentColor}.ly-input-container{padding:1.125em 0;position:relative;opacity:1;display:inline-block;vertical-align:inherit;width:100%}.ly-input-container ::ng-deep input{text-align:inherit}.bottom-field,.ly-error-container{position:absolute;bottom:0;left:0;width:100%;pointer-events:none;font-size:75%;-webkit-transform:translate3d(0,calc(100% - 1.1em),0);transform:translate3d(0,calc(100% - 1.1em),0);display:-webkit-box;display:-ms-flexbox;display:flex}.bottom-field .bottom-field-space,.ly-error-container .bottom-field-space{-webkit-box-flex:1;-ms-flex:1;flex:1}.ly-required{position:absolute;top:1.125em;right:0;pointer-events:none;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);opacity:.45}:host.ly-input-invalid .ly-input-float-label,:host.ly-input-invalid .ly-input-placeholder,:host.ly-input-invalid .ly-input-underline,:host.ly-input-invalid /deep/ ly-error{color:#f44336!important}:host.ly-input-invalid .ly-input-underline:after{width:100%}"],template:'<ng-content select="ly-before"></ng-content>\n<div class="{{ _classes.withColor }} ly-input-underline"></div>\n<div class="ly-input-container {{ _classes.caretColor }}">\n  <ng-content select="input, textarea"></ng-content>\n  \x3c!-- ly-placeholder --\x3e\n  <ng-container *ngIf="placeholder; then isPlaceholderTemplate; else placeholderContainer"></ng-container>\n  <ng-template #isPlaceholderTemplate>\n    <div *ngIf="toBoolean(placeholder) !== undefined && placeholderState" color="input:label" class="ly-input-placeholder">{{ placeholder }}</div>\n  </ng-template>\n  <ng-template #placeholderContainer>\n    <div *ngIf="lyPlaceholder !== undefined && placeholderState" color="input:label" class="ly-input-placeholder">\n      <ng-content select="ly-placeholder"></ng-content>\n    </div>\n  </ng-template>\n  \x3c!-- ly-default --\x3e\n  <ng-container *ngIf="toBoolean(default); then isDefaultTemplate"></ng-container>\n  <ng-template #isDefaultTemplate>\n    <div *ngIf="!(lyDefault !== undefined) && defaultOff" color="input:label" class="ly-input-default">Default: {{ default }}</div>\n    <div *ngIf="lyDefault !== undefined && defaultOff" color="input:label" class="ly-input-default">\n      <ng-content select="ly-default"></ng-content>{{ default }}\n    </div>\n  </ng-template>\n  \x3c!-- ly-label --\x3e\n  <ng-container *ngIf="toBoolean(label); then _isLabelTemplate; else labelContainer"></ng-container>\n  <ng-template #_isLabelTemplate>\n    <div *ngIf="label !== undefined" color="input:label" class="ly-input-float-label">{{ label }}</div>\n  </ng-template>\n  <ng-template #labelContainer>\n    <div *ngIf="lyLabel" color="input:label" class="ly-input-float-label">\n      <ng-content select="ly-label"></ng-content>\n    </div>\n  </ng-template>\n</div>\n<div class="ly-icon-required" *ngIf="required"></div>\n<div class="bottom-field" *ngIf="!_isErrorState()">\n  <ng-content select="ly-hint[align=start], ly-hint:not(ly-hint[align])"></ng-content>\n  <span class="bottom-field-space"></span>\n  <ng-content select="ly-hint[align=end]"></ng-content>\n</div>\n<div class="bottom-field" *ngIf="_isErrorState()">\n  <ng-content select="ly-error"></ng-content>\n</div>\n<ng-content select="ly-after"></ng-content>\n',host:{"[class.ly-input-invalid]":"_isErrorState()","[class.ng-untouched]":'_shouldForward("untouched")',"[class.ng-touched]":'_shouldForward("touched")',"[class.ng-pristine]":'_shouldForward("pristine")',"[class.ng-dirty]":'_shouldForward("dirty")',"[class.ng-valid]":'_shouldForward("valid")',"[class.ng-invalid]":'_shouldForward("invalid")',"[class.ng-pending]":'_shouldForward("pending")'},changeDetection:t.ChangeDetectionStrategy.OnPush,preserveWhitespaces:!1}]}],h.ctorParameters=function(){return[{type:o.LyTheme},{type:t.ChangeDetectorRef},{type:s},{type:o.LyBgColorAndRaised,decorators:[{type:t.Optional}]},{type:t.Renderer2},{type:t.ElementRef}]},h.propDecorators={_field:[{type:t.ContentChild,args:[a]}],lyPlaceholder:[{type:t.ContentChild,args:[d]}],lyDefault:[{type:t.ContentChild,args:[f]}],lyLabel:[{type:t.ContentChild,args:[y]}],type:[{type:t.Input}],label:[{type:t.Input}],placeholder:[{type:t.Input}],labelAbove:[{type:t.Input}],"default":[{type:t.Input}],withColor:[{type:t.Input}],isFloatingLabel:[{type:t.HostBinding,args:["class.ly-label-above"]}],focusState:[{type:t.HostBinding,args:["class.ly-focus-active"]}],defaultOff:[{type:t.HostBinding,args:["class.ly-hidden-input"]}],disabled:[{type:t.Input}],required:[{type:t.Input}],currentValueState:[{type:t.HostBinding,args:["class.ly-value-on"]}]},u([o.IsBoolean(),c("design:type",Boolean)],h.prototype,"labelAbove",void 0);var g=function(){};g.decorators=[{type:t.NgModule,args:[{imports:[r.CommonModule,n.FormsModule,o.LyCommonModule],exports:[h,l,a,p,f,y,d],declarations:[h,l,a,p,f,y,d]}]}],e.LyInputCommon=p,e.LyPlaceholder=d,e.LyDefault=f,e.LyLabel=y,e.LyInput=h,e.LyInputModule=g,e.LyInputContents=l,e.LyFieldDirective=a,e.ɵa=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-input.umd.min.js.map
