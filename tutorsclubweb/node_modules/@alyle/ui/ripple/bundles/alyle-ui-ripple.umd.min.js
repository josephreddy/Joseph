!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@alyle/ui"),require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("ly.ripple",["exports","@alyle/ui","@angular/core","@angular/common"],t):t((e.ly=e.ly||{},e.ly.ripple={}),e.ly.core,e.ng.core,e.ng.common)}(this,function(e,r,t,n){"use strict";var o=function(){function e(){this.state=!0,this.timestamp=-Date.now(),this.container=document.createElement("span")}return e.prototype.end=function(){this.state=!1,this.timestamp+=Date.now()},e}(),s=function(){function e(e,t,n,i){this._ngZone=e,this.stylesData=t,this._containerElement=n,this._triggerElement=i,this._state=!0,this._eventHandlers=new Map,this.rippleConfig={},this._transitionDuration="950ms",this._eventOptions={passive:!0},r.Platform.isBrowser&&("function"==typeof TouchEvent&&TouchEvent?(this._eventHandlers.set("pointerdown",this.onPointerDown.bind(this)),this._eventHandlers.set("touchend",this.onPointerLeave.bind(this))):this._eventHandlers.set("mousedown",this.onPointerDown.bind(this)),this._eventHandlers.set("mouseup",this.onPointerLeave.bind(this)),this._eventHandlers.set("mouseleave",this.onPointerLeave.bind(this)),i||(i=n),this.setTriggerElement(i))}return e.prototype.setConfig=function(e){this.rippleConfig=e},Object.defineProperty(e.prototype,"_rectContainer",{get:function(){return this._containerElement.getBoundingClientRect()},enumerable:!0,configurable:!0}),e.prototype.setTriggerElement=function(n){var i=this;n&&(n.classList.add(this.stylesData[0]),this._ngZone.runOutsideAngular(function(){i._eventHandlers.forEach(function(e,t){return n.addEventListener(t,e,i._eventOptions)})})),this._triggerElement=n},e.prototype.createRipple=function(e){this._rippleRef=new o;var t=this._rippleRef.container;for(var n in t.className=this.stylesData[1],e)if(e.hasOwnProperty(n)){var i=e[n];t.style[n]="number"==typeof i?i+"px":i}this._containerElement.appendChild(t),window.getComputedStyle(t).getPropertyValue("opacity"),t.style.transform="scale(1)"},e.prototype.onPointerDown=function(e){this.rippleConfig.disabled||(this.endRipple(),this.startRipple(e,this.rippleConfig))},e.prototype.onPointerLeave=function(e){this.rippleConfig.disabled||this.endRipple()},e.prototype.startRipple=function(e,t){var n=this._rectContainer,i=e.clientX,r=e.clientY;t.centered&&(i=n.left+n.width/2,r=n.top+n.height/2);var o,s,p,a,l,u,c=i-n.left,h=r-n.top,d="containerSize"===t.radius?(u=n,Math.max(u.width,u.height)/2):t.radius||(o=i,s=r,p=n,a=Math.max(Math.abs(o-p.left),Math.abs(o-p.right)),l=Math.max(Math.abs(s-p.top),Math.abs(s-p.bottom)),Math.sqrt(a*a+l*l));t.percentageToIncrease&&(d+=d*t.percentageToIncrease/100);this.createRipple({left:c-d,top:h-d,width:2*d,height:2*d,transitionDuration:this._transitionDuration})},e.prototype.runTimeoutOutsideZone=function(e,t){void 0===t&&(t=0),this._ngZone.runOutsideAngular(function(){return setTimeout(e,t)})},e.prototype.endRipple=function(){var e=this._rippleRef||null,t=parseFloat(this._transitionDuration);e&&e.state&&(e.end(),this.runTimeoutOutsideZone(function(){e.container.style.opacity="0",e.container.style.transitionDuration="200ms"},e.timestamp<t?.15*t:0),this.runTimeoutOutsideZone(function(){e.container.parentNode.removeChild(e.container)},e.timestamp<t?2*t:t))},e.prototype.removeEvents=function(){var n=this;this._triggerElement&&this._eventHandlers.forEach(function(e,t){n._triggerElement.removeEventListener(t,e,n._eventOptions)})},e}();var i=function(e){this.theme=e,this.stylesData=[],this.classes={root:this.theme.setRootStyle("ripple",function(){return"z-index: 0;border-radius: inherit;"})};var t=this.theme.setRootStyle("ripple",function(){return"position: relative;"}),n=this.theme.setRootStyle("ripple-cont",function(){return"position: absolute;width: 5px;height: 5px;background: currentColor;opacity: .19;border-radius: 100%;-webkit-transform: scale(0);transform: scale(0);-webkit-transition: opacity ease,-webkit-transform cubic-bezier(.1, 1, 0.5, 1);transition: opacity ease,-webkit-transform cubic-bezier(.1, 1, 0.5, 1);transition: opacity ease,transform cubic-bezier(.1, 1, 0.5, 1);transition: opacity ease,transform cubic-bezier(.1, 1, 0.5, 1);pointer-events: none;"});this.stylesData.push(t,n)};i.decorators=[{type:t.Injectable,args:[r.ProvidedInTheme]}],i.ctorParameters=function(){return[{type:r.LyTheme}]},i.ngInjectableDef=t.defineInjectable({factory:function(){return new i(t.inject(r.LyTheme))},token:i,providedIn:r.AlyleUIModule});var p=function(){function e(e,t,n,i){this.rippleService=e,this._elementRef=t,this._ngZone=n,this._renderer=i,r.Platform.isBrowser&&(this.rippleContainer=new s(this._ngZone,this.rippleService.stylesData,this._elementRef.nativeElement))}return Object.defineProperty(e.prototype,"lyRippleConfig",{get:function(){return{centered:r.toBoolean(this.lyRippleCentered),disabled:r.toBoolean(this.lyRippleDisabled),sensitive:r.toBoolean(this.lyRippleSensitive),radius:this.lyRippleRadius,percentageToIncrease:this.lyRipplePercentageToIncrease}},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this._updateRipple()},e.prototype.ngOnChanges=function(e){this._updateRipple()},e.prototype._updateRipple=function(){r.Platform.isBrowser&&this.rippleContainer.setConfig(this.lyRippleConfig)},e.prototype.ngOnDestroy=function(){this.rippleContainer&&this.rippleContainer.removeEvents()},e}();p.decorators=[{type:t.Directive,args:[{selector:"[lyRipple], [ly-ripple]",exportAs:"lyRipple"}]}],p.ctorParameters=function(){return[{type:i},{type:t.ElementRef},{type:t.NgZone},{type:t.Renderer2}]},p.propDecorators={lyRippleCentered:[{type:t.Input}],lyRippleDisabled:[{type:t.Input}],lyRippleSensitive:[{type:t.Input}],lyRippleRadius:[{type:t.Input}],lyRipplePercentageToIncrease:[{type:t.Input}]};var a=function(){};a.decorators=[{type:t.NgModule,args:[{imports:[n.CommonModule],declarations:[p],exports:[p]}]}],e.LyRippleModule=a,e.LyRipple=p,e.LyRippleService=i,e.RippleRef=o,e.Ripple=s,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=alyle-ui-ripple.umd.min.js.map
