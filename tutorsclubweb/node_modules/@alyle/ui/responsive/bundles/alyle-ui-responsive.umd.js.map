{
  "version": 3,
  "file": "alyle-ui-responsive.umd.js",
  "sources": [
    "ng://@alyle/ui/responsive/out/responsive.module.ts",
    "ng://@alyle/ui/responsive/out/media/media.directive.ts",
    "ng://@alyle/ui/responsive/out/media.service.ts"
  ],
  "sourcesContent": [
    "import { NgModule, NgZone, ModuleWithProviders, SkipSelf, Optional, Provider } from '@angular/core';\nimport { Responsive } from './media.service';\nimport { PLATFORM_ID } from '@angular/core';\nimport { MediaDirective } from './media/media.directive';\n\nexport function responsiveProviderFactory(\n  parent: Responsive, ngZone: NgZone, platformId: Object): Responsive {\nreturn parent || new Responsive(ngZone, platformId);\n}\n\nexport const responsiveProvider: Provider = {\n  provide: Responsive,\n  deps: [[new Optional(), new SkipSelf(), Responsive], NgZone, PLATFORM_ID],\n  useFactory: responsiveProviderFactory\n};\n\n@NgModule({\n  declarations: [MediaDirective],\n  exports: [MediaDirective],\n  providers: [responsiveProvider]\n})\nexport class ResponsiveModule { }\n",
    "import {\n  Directive,\n  Input,\n  TemplateRef,\n  ViewChild,\n  ViewContainerRef,\n  ComponentRef,\n  OnInit,\n  AfterViewInit,\n  OnDestroy,\n  EmbeddedViewRef,\n  Inject\n} from '@angular/core';\nimport { PLATFORM_ID } from '@angular/core';\nimport { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport { Subscription } from 'rxjs';\n\nimport { Responsive } from '../media.service';\n\n@Directive({\n  selector: '[lyResponsive]'\n})\nexport class MediaDirective implements OnInit, OnDestroy {\n  private _media: string;\n  view: Subscription;\n  private _TemplateRef: TemplateRef<any>|null = null;\n\n  @Input()\n  set lyResponsive(val: string) {\n    this._media = val;\n    this.updateView();\n  }\n\n  get media(): string {\n    return this._media;\n  }\n  constructor(\n    private _viewContainer: ViewContainerRef,\n    templateRef: TemplateRef<any>,\n    private mediaService: Responsive,\n    @Inject(PLATFORM_ID) private platformId: Object\n  ) {\n    this._TemplateRef = templateRef;\n  }\n\n  ngOnInit() {\n    this.view = this.mediaService.stateView().subscribe(() => {\n      this.updateView();\n    });\n  }\n\n  updateView() {\n    if (isPlatformServer(this.platformId) || this.mediaService.matchMedia(this._media)) {\n      if (this._viewContainer.length === 0) {\n        this._viewContainer.createEmbeddedView(this._TemplateRef);\n      }\n    } else if (this._viewContainer.length !== 0) {\n      this._viewContainer.clear();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this.view) {\n      this.view.unsubscribe();\n    }\n  }\n\n}\n",
    "import { Platform } from '@alyle/ui';\nimport { Injectable, NgZone, Inject } from '@angular/core';\nimport { Observable ,  fromEvent ,  merge, of ,  Subscription } from 'rxjs';\nimport { map, filter } from 'rxjs/operators';\nimport { MediaQueries } from './media-queries';\nimport { PLATFORM_ID, APP_ID } from '@angular/core';\nimport { isPlatformBrowser, isPlatformServer } from '@angular/common';\n@Injectable()\nexport class Responsive {\n  private static _queryMap: Map<string, boolean> = new Map<string, boolean>();\n  constructor(\n    private _ngZone: NgZone,\n    @Inject(PLATFORM_ID) private platformId: Object) { }\n\n  matchMedia(val: string): boolean {\n    return !Platform.isBrowser ? false : matchMedia(val).matches;\n  }\n\n  /**\n   * return Observable<boolean>\n   */\n  observe(value: string): Observable<boolean> {\n    let mm = this.matchMedia(value);\n    const mediaObservable = merge(of(true), this.stateView());\n    return mediaObservable\n    .pipe(\n      filter((state) => {\n        return this.matchMedia(value) !== mm || state === true;\n      },\n      map(() => {\n        mm = this.matchMedia(value);\n        this._registerMedia(value);\n        return this.matchMedia(value);\n      })\n    ));\n  }\n\n  private _registerMedia(value: string) {\n    Responsive._queryMap.set(value, this.matchMedia(value));\n  }\n\n  stateView(): Observable<any> {\n    if (isPlatformBrowser(this.platformId)) {\n      return this._ngZone.runOutsideAngular(() => {\n        return fromEvent(window, 'resize');\n      });\n    }\n    if (isPlatformServer(this.platformId)) {\n      return of();\n    }\n  }\n\n}\n"
  ],
  "names": [
    "NgModule",
    "Optional",
    "SkipSelf",
    "NgZone",
    "PLATFORM_ID",
    "Input",
    "Inject",
    "TemplateRef",
    "ViewContainerRef",
    "Directive",
    "isPlatformServer",
    "Injectable",
    "of",
    "fromEvent",
    "isPlatformBrowser",
    "map",
    "filter",
    "merge",
    "Platform"
  ],
  "mappings": "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"
}
